<!--views/admin/create.ejs-->
<div class="account-page">
  <h1 class="account-title">Create New Admin / Agent</h1>

  <div class="flash-messages"><%- messages() %></div>

  <form
    id="admin-create-form"
    method="post"
    action="/admin/create"
    class="account-form"
    novalidate
  >
    <div class="form-row">
      <label for="admin-name"
        >Full name <span class="required" aria-hidden="true">*</span></label
      >
      <input id="admin-name" name="name" type="text" required />
    </div>

    <div class="form-row">
      <label for="admin-email"
        >Email <span class="required" aria-hidden="true">*</span></label
      >
      <input id="admin-email" name="email" type="email" required />
    </div>

    <div class="form-row" style="position: relative">
      <label for="admin-password"
        >Temporary password
        <span class="required" aria-hidden="true">*</span></label
      >
      <input
        id="admin-password"
        name="password"
        type="password"
        required
        pattern="^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\\s).{8,}$"
        aria-describedby="pw-requirements-admin"
      />
      <button type="button" class="pw-toggle" aria-pressed="false">Show</button>
    </div>

    <div id="pw-requirements-admin" class="pw-requirements">
      <strong>Password requirements:</strong>
      <ul>
        <li>Minimum 8 characters</li>
        <li>At least 1 uppercase letter</li>
        <li>At least 1 number</li>
        <li>At least 1 special character (e.g. !@#$%)</li>
      </ul>
    </div>

    <div class="form-row">
      <label for="admin-role"
        >Role <span class="required" aria-hidden="true">*</span></label
      >
      <select id="admin-role" name="role" required>
        <option value="agent">Agent</option>
        <option value="super">Super</option>
      </select>
    </div>

    <div class="form-row">
      <label for="admin-region-state">Region - State</label>
      <select id="admin-region-state" name="region_state">
        <option value="">(All)</option>
        <% if (Array.isArray(statesLGAs)) { %>
        <% statesLGAs.forEach(function(s) { %>
        <option value="<%= s.state %>"><%= s.state %></option>
        <% }) %>
        <% } %>
      </select>
    </div>

    <div class="form-row">
      <label for="admin-region-lga">Region - LGA</label>
      <select id="admin-region-lga" name="region_lga">
        <option value="">(All)</option>
      </select>
    </div>

    <!-- Security question (optional) -->
    <div class="form-row">
      <label for="admin-security-question"
        >Password recovery question (optional)</label
      >
      <select id="admin-security-question" name="security_question">
        <option value="">(Choose one)</option>
        <option value="mother_maiden">
          What is your mother's maiden name?
        </option>
        <option value="first_school">
          What was the name of your first school?
        </option>
        <option value="first_pet">What was your first pet's name?</option>
        <option value="favourite_food">What is your favourite food?</option>
      </select>
    </div>

    <div class="form-row">
      <label for="admin-security-answer">Security answer (optional)</label>
      <input id="admin-security-answer" name="security_answer" type="text" />
    </div>

    <div class="form-row">
      <button type="submit" class="btn-primary">Create Admin</button>
    </div>
  </form>

  <!-- expose states/LGAs to client JS without inline JS -->
  <div
    id="states-data"
    data-states="<%- JSON.stringify(statesLGAs || []) %>"
    style="display: none"
    aria-hidden="true"
  ></div>
</div>
