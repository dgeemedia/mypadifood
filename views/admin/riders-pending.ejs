<!-- views/admin/riders-pending.ejs -->
<h2>Pending Rider Applications</h2>

<div class="flash-messages"><%- messages() %></div>

<% if (!riders || !riders.length) { %>
  <p>No pending rider applications.</p>
<% } else { %>
  <table class="resources-table" role="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Contact</th>
        <th>State / LGA</th>
        <th>Details</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% riders.forEach(r => { %>
        <tr id="rider-row-<%= r.id %>">
          <td><strong><%= r.full_name %></strong></td>
          <td><div><%= r.phone %></div><div class="muted small"><%= r.email %></div></td>
          <td><%= r.state %> / <%= r.lga %></td>
          <td>
            <div>Vehicle: <%= r.vehicle_type || '—' %></div>
            <div>Vehicle no: <%= r.vehicle_number || '—' %></div>
            <div>Bank: <%= r.bank_name || '—' %> • <%= r.account_number || '—' %></div>
            <% if (r.id_file) { %>
              <div><a href="/<%= r.id_file %>" target="_blank" rel="noopener">View ID</a></div>
            <% } %>
          </td>
          <td>
            <form class="rider-decision-form" data-rider-id="<%= r.id %>" style="display:block; margin-bottom:6px;">
              <input type="hidden" name="riderId" value="<%= r.id %>">
              <input type="hidden" name="decision" value="approve">
              <button type="submit" class="btn btn-primary" data-action="approve">Approve</button>
            </form>

            <form class="rider-decision-form" data-rider-id="<%= r.id %>" style="display:block;">
              <input type="hidden" name="riderId" value="<%= r.id %>">
              <input type="hidden" name="decision" value="reject">
              <input type="text" name="reason" placeholder="Optional reason" />
              <button type="submit" class="btn btn-danger" data-action="reject">Reject</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>

<!-- include client-side JS that attaches AJAX handlers -->
<script src="/js/admin-riders-pending.js"></script>
