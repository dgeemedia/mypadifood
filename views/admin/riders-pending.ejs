<!--views/admin/riders-pending.ejs-->
<h2>Pending Rider Applications</h2>

<div class="flash-messages"><%- messages() %></div>

<% if (!riders || !riders.length) { %>
  <p>No pending rider applications.</p>
<% } else { %>
  <table class="resources-table" role="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Contact</th>
        <th>State / LGA</th>
        <th>Details</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% riders.forEach(r => { %>
        <tr>
          <td><strong><%= r.full_name %></strong></td>
          <td><div><%= r.phone %></div><div class="muted small"><%= r.email %></div></td>
          <td><%= r.state %> / <%= r.lga %></td>
          <td>
            <div>Vehicle: <%= r.vehicle_type || '—' %></div>
            <div>Vehicle no: <%= r.vehicle_number || '—' %></div>
            <div>Bank: <%= r.bank_name || '—' %> • <%= r.account_number || '—' %></div>
            <% if (r.id_file) { %>
              <div><a href="/<%= r.id_file %>" target="_blank" rel="noopener">View ID</a></div>
            <% } %>
          </td>
          <td>
            <form method="post" action="/admin/resources/riders/decision" style="display:inline">
              <input type="hidden" name="riderId" value="<%= r.id %>">
              <input type="hidden" name="decision" value="approve">
              <button type="submit" class="btn btn-primary">Approve</button>
            </form>

            <form method="post" action="/admin/resources/riders/decision" style="display:inline; margin-top:6px;">
              <input type="hidden" name="riderId" value="<%= r.id %>">
              <input type="hidden" name="decision" value="reject">
              <input type="text" name="reason" placeholder="Optional reason" />
              <button type="submit" class="btn btn-danger">Reject</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>
