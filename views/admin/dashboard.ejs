<!--views/admin/dashboard.ejs-->
<h2>Admin Dashboard</h2>
<p>Pending vendors: <%= vendorsCount %></p>
<p>
  Pending riders: <%= typeof ridersCount !== 'undefined' ? ridersCount : 0 %>
</p>
<p>Pending orders: <%= ordersCount %></p>
<p>
  Pending weekly plans: <%= typeof weeklyPlansCount !== 'undefined' ?
  weeklyPlansCount : 0 %>
</p>

<nav>
  <a href="/admin/vendors/pending">Review Vendor Requests</a>
  <% if (currentUser && currentUser.type === 'super') { %>
  | <a href="/admin/create">Create Admin</a>
  <% } %>
  | <a href="/admin/resources">Resources</a> |
  <a href="/admin/resources/riders/pending">Review Rider Applications</a> |
  <a href="#" id="nav-pending-orders">Pending Orders (live)</a> |
  <a href="#" id="nav-completed-orders">Completed Orders</a> |
  <a href="/admin/food-orders">Weekly Plans</a> |
  <a href="#" id="nav-notifications"
    >Notifications
    <span
      id="notifBadge"
      style="
        background: #ff4d4f;
        color: #fff;
        padding: 2px 6px;
        border-radius: 12px;
        font-size: 0.9em;
        margin-left: 6px;
      "
      >0</span
    ></a
  >
</nav>

<div id="notificationsPanel" style="margin-top: 1rem; display: none"></div>

<div id="pendingOrdersPanel" style="margin-top: 1rem; display: none">
  <h3>Pending Orders (live)</h3>
  <div id="pendingOrders"></div>
  <p id="pendingHint" style="font-size: 0.9em; color: #666">
    Click an order to open it. Blue border indicates client currently online.
  </p>
</div>

<!-- NEW: Pending weekly plans panel (populated by chat.js on 'new_weekly_plan') -->
<div id="pendingWeeklyPlansPanel" style="margin-top: 1rem; display: none">
  <h3>Pending Weekly Plans (live)</h3>
  <div id="pendingWeeklyPlans"></div>
  <p style="font-size: 0.9em; color: #666">
    New weekly plans will appear here for review.
  </p>
</div>

<div id="completedOrdersPanel" style="margin-top: 1rem; display: none">
  <h3>Completed Orders (history)</h3>
  <div id="completedOrders"></div>
  <p style="font-size: 0.9em; color: #666">
    These are completed orders â€” useful for audit and follow-ups.
  </p>
</div>
