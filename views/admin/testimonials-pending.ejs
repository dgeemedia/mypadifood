<!-- views/admin/testimonials-pending.ejs -->

<h2>Pending Testimonials</h2>

<% if (!testimonials || !testimonials.length) { %>
  <p>No pending testimonials.</p>
<% } else { %>
  <div class="testi-grid">
    <% testimonials.forEach(function(t) { %>
      <div class="testi-card card" style="padding:12px;margin-bottom:12px;">
        <div style="display:flex; gap:12px; align-items:flex-start;">
          <div style="flex:0 0 80px;">
            <% if (t.photo_url) { %>
              <img src="<%= t.photo_url %>" alt="<%= t.name %>" style="width:80px;height:80px;object-fit:cover;border-radius:8px;" />
            <% } else { %>
              <div style="width:80px;height:80px;border-radius:8px;background:#f1f5f9;display:flex;align-items:center;justify-content:center;color:#888;">No photo</div>
            <% } %>
          </div>
          <div style="flex:1;">
            <p style="margin:0 0 6px 0;"><strong><%= t.name %></strong> <small class="muted"><%= t.city || '' %></small></p>
            <blockquote style="margin:0 0 8px 0;">“<%= t.quote %>”</blockquote>
            <form method="post" action="/admin/testimonials/<%= t.id %>/approve" style="display:inline">
              <button class="btn" type="submit">Approve</button>
            </form>
            <form method="post" action="/admin/testimonials/<%= t.id %>/reject" style="display:inline; margin-left:8px">
              <button class="btn btn-danger" type="submit" onclick="return confirm('Reject and delete this testimonial?')">Reject</button>
            </form>
            <div style="margin-top:6px"><small class="muted">Submitted: <%= (t.created_at) ? new Date(t.created_at).toLocaleString() : '' %></small></div>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
<% } %>
